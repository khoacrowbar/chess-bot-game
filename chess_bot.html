<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Game Cờ Vua Chơi Với Bot</title>
    <style>
        body { display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial; }
        #board { display: grid; grid-template-columns: repeat(8, 60px); grid-template-rows: repeat(8, 60px); }
        .cell { width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; font-size: 36px; cursor: pointer; }
        .white { background-color: #f0d9b5; }
        .black { background-color: #b58863; }
    </style>
</head>
<body>
    <div id="board"></div>

    <script>
        const boardElement = document.getElementById('board');
        const initialBoard = [
            ['♜','♞','♝','♛','♚','♝','♞','♜'],
            ['♟','♟','♟','♟','♟','♟','♟','♟'],
            ['','','','','','','',''],
            ['','','','','','','',''],
            ['','','','','','','',''],
            ['','','','','','','',''],
            ['♙','♙','♙','♙','♙','♙','♙','♙'],
            ['♖','♘','♗','♕','♔','♗','♘','♖']
        ];

        let board = JSON.parse(JSON.stringify(initialBoard));
        let selected = null;

        function renderBoard() {
            boardElement.innerHTML = '';
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 8; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell ' + ((i+j)%2===0 ? 'white' : 'black');
                    cell.textContent = board[i][j];
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.addEventListener('click', onCellClick);
                    boardElement.appendChild(cell);
                }
            }
        }

        function onCellClick(e) {
            const row = parseInt(e.currentTarget.dataset.row);
            const col = parseInt(e.currentTarget.dataset.col);
            if (selected) {
                // di chuyển quân
                board[row][col] = board[selected.row][selected.col];
                board[selected.row][selected.col] = '';
                selected = null;
                renderBoard();
                setTimeout(botMove, 300); // bot đi sau 0.3 giây
            } else if (board[row][col] && board[row][col].toUpperCase() === board[row][col]) {
                // chọn quân trắng (người chơi)
                selected = {row, col};
            }
        }

        function botMove() {
            // bot đi ngẫu nhiên
            const botPieces = [];
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 8; j++) {
                    if (board[i][j] && board[i][j] === board[i][j].toLowerCase()) {
                        botPieces.push({row: i, col: j});
                    }
                }
            }
            if (botPieces.length === 0) return;

            const piece = botPieces[Math.floor(Math.random()*botPieces.length)];
            const moves = [];
            for (let r = 0; r < 8; r++) {
                for (let c = 0; c < 8; c++) {
                    if (!board[r][c] || board[r][c] === board[r][c].toUpperCase()) moves.push({row:r,col:c});
                }
            }
            if (moves.length === 0) return;
            const move = moves[Math.floor(Math.random()*moves.length)];
            board[move.row][move.col] = board[piece.row][piece.col];
            board[piece.row][piece.col] = '';
            renderBoard();
        }

        renderBoard();
    </script>
</body>
</html>
